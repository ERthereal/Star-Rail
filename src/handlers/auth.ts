import { PlayerGetTokenCsReq } from "../../resources/autogenerated/PlayerGetTokenCsReq";
import { PlayerGetTokenCsRsp } from "../../resources/autogenerated/PlayerGetTokenCsRsp";
import { PacketContext, RouteManager } from "../network/route";

export class AuthHandler{
    constructor(routeManager: RouteManager){
        routeManager.on(PlayerGetTokenCsReq, this.PlayerGetTokenCsReq);
    }

    public PlayerGetTokenCsReq(context: PacketContext<PlayerGetTokenCsReq>){
        const rsp = PlayerGetTokenCsRsp.create();
        const seed = BigInt(0);
        rsp.uid = 12312310; //hardcoded for now. TODO: database
        rsp.accountType = context.request.accountType!;
        rsp.accountUid = context.request.accountUid!;
        rsp.token = context.request.accountToken!;
        rsp.secretKey = seed.toString();
        context.send(PlayerGetTokenCsRsp, rsp);
    }
}